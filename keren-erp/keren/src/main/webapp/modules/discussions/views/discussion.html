<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css'>
<link href="modules\discussions\css\discussion.css"  rel="stylesheet">
<div  ng-controller="discussionCtrl"  class="mail-box" style="position: absolute;height: 100%;">
            <aside class="sm-side">
                <div class="user-head">
                    <a class="inbox-avatar" href="javascript:;">
                        <img  width="54" hieght="50" id="mail_user_id" >
                    </a>
                    <div class="user-name">
                        <h5><a href="#">{{currentUser.intitule | translate}}</a></h5>
                        <span><a href="#">{{currentUser.courriel}}</a></span>
                    </div>                   
                </div>
                <div class="inbox-body">
                    <a href="#"   title="Compose"    class="btn btn-compose">
                        Tout marquer comme lu
                    </a>                    
                </div>
                <div  style="height: 100%;background: #9d9d9d;">
                        <ul class="inbox-nav inbox-divider">               
                               <li>
                                   <a href="#"  ng-click="loadInboxMessages()">
                                       <i class="fa fa-inbox"></i>
                                          {{'INBOX' | translate}} 
                                          <span class="label label-danger pull-right" ng-hide="messagestate.unreadMessages==0">
                                              {{messagestate.unreadMessages}}
                                          </span>
                                   </a>
                             </li>                                        
                       </ul>
                       <ul class="inbox-nav inbox-divider">
                           <li >
                               <h4>{{'CANAUX' | translate}}</h4>
                           </li>
                           <ul ng-repeat="item in canaux">
                               <li style="height: 10px;margin-top: -10px;">
                                   <a href="#" ng-click="gotoselectcanal(item)">#{{item.code}}</a>
                               </li>

                           </ul>
                       </ul>
                       <ul class="nav nav-pills nav-stacked labels-info ">
                           <li > <h4>{{'MSGEDIRECT' | translate}}</h4> </li>
                           <ul ng-repeat="item in connectedusers"> 
                               <li> <a href="#"  ng-click="gotodirectdiscussion(item)"> <i class=" fa fa-circle text-success"></i>{{item.intitule | translate}}</a>  </li>                           
                           </ul>
                       </ul>
              </div>
            </aside>
        <aside class="lg-side">
            <div class="inbox-head" style="margin-bottom: 31px;">
                <div>
                    <h3>{{windowTitle | translate}}</h3>
                    <div class="input-group col-md-4 pull-right" style="width: 40%;">
                        <input class="search__field" type="text"  ng-model="searchCriteria" name="x" placeholder="Search term..." style="width: 100%;" >
                        <span class="input-group-btn">
                          <button class="btn btn-inverse btn-sm" type="button" ng-click="searchAction()" style="padding-bottom: 0;border:solid 1px #f5f5f5;">
                                  <span class="glyphicon glyphicon-search">
                                        <span class="sr-only">Search...</span>
                                  </span>
                          </button>
                        </span>                   
                    </div>  
                </div>
                 <div class="mail-option">
                     <ul class="unstyled inbox-pagination">
                        <li><span>{{pagination.currentPage}} - {{pagination.endIndex}} / {{pagination.totalPages}} </span></li>
                        <li>
                            <button type="button" class="btn btn-default btn-sm"  ng-click="pagination.previous()"  ng-disabled="!pagination.hasprevious()">
                                <span class="glyphicon glyphicon-chevron-left"  aria-hidden="true"></span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="btn btn-default btn-sm"  ng-click="pagination.next()"  ng-disabled="!pagination.hasnext()">
                                <span class="glyphicon glyphicon-chevron-right"  aria-hidden="true"></span>
                            </button>
                        </li>
                    </ul>
               </div>
            </div>
            <div class="inbox-body" style="background-color: white;width: 100%;height: 100%;overflow: auto;padding: 0;">           
               <div class="panel-heading"  ng-hide="windowType=='INBOX'">
                    <div class="input-group">
                             <input type="text" class="form-control" placeholder="{{'INPUTMSGE' | translate}}"  ng-required="true" ng-minlength="2"  ng-model="messagebody"/>
                             <div class="input-group-btn ">
                                     <button class="btn btn-info" type="button" ng-click="imageClick('pjfileinput_id')"  id="pjidbtn">
                                        <span class="glyphicon glyphicon-paperclip"  aria-hidden="true" style="color:blue;"> </span>                                            				  
                                     </button>
                                    <input type="file" id="pjfileinput_id" style="display: none" fileinput="file"   onchange="angular.element(this).scope().gererChangementFichier(event)">
                             </div>
                             <span class="input-group-btn">
                                     <button class="btn btn-info" type="button" ng-click ="sendAction()">
                                          <span class="glyphicon glyphicon-send"  aria-hidden="true" style="color:blue"></span> 
                                     </button>
                             </span>
                    </div>
                    <div  id="pjmenuid">

                    </div>
               </div>
               <div style="height: 87%;width: 100%;background-color: white;overflow: auto;" id="tablecontainer"> 
                       <ul class="media-list" ng-repeat="item in messages">
                           <li class="media">
                               <div class="media-body">
                                   <div class="media">
                                       <a class="pull-left" href="#"  ng-if="item.typeMessage=='RECEPTION'">
                                           <img class="media-object img-circle " id="{{item.imageid}}"  width="48" height="46" />
                                        </a>
                                       <a class="pull-right" href="#"  ng-if="item.typeMessage=='ENVOI'">
                                            <img class="media-object img-circle " id="{{item.imageid}}" width="52" height="50" />
                                        </a>
                                       <div class="media-body">
                                           {{item.body}}
                                           <br/>
                                           <span style="display:inline-block" ng-repeat="pj in item.piecesjointe" ng-show="item.piecesjointe.length>0">
                                               <a style="padding-right:5px;" href="#" ng-click="showpiecejointe(pj.id)">
                                                   {{pj.attachename}}
                                               </a>
                                           </span>
                                           <br />
                                           <small class="text-muted" ng-hide="item.typeMessage=='ENVOI'">{{item.sender.intitule}} | {{formatDat(item.date)}}</small>
                                           <small class="text-muted pull-right" ng-hide="item.typeMessage=='RECEPTION'">{{item.sender.intitule}} | {{formatDat(item.date)}}</small>
                                           <span display:inline-block ng-show="shownolu(item)">
                                               <a style="padding-right:5px;" href="#" ng-click="marquerlu(item.id)">
                                                   <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                                               </a>
                                           </span>
                                           <hr />
                                       </div>
                                   </div>
                               </div>
                           </li>
                       </ul> 
                </div>
            </div>
        </aside>
    </div>
</div>